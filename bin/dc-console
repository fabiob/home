#!/bin/bash
c="$1"
DC_CMD="docker-cloud"

if [[ -z $c ]]; then
	echo "Usage: $(basename $0) <container or service> [command]"
	exit 1
fi

if [[ ! $c =~ -[0-9]+$ ]]; then
	# if a service name is specified, select a random running container to exec
	c=$($DC_CMD container ps --service "$c" -s Running -q | shuf -n1)
fi

shift
args="$@"
if [[ -z $args ]]; then
	args="sh"
fi
$DC_CMD exec $c sh -c "TERM=$TERM COLUMNS=$(tput cols) $args"
